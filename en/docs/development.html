<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>4. FF-SDK-Unity application development | FF-SDK-Unity </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="4. FF-SDK-Unity application development | FF-SDK-Unity ">
      
      
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/commissure-inc/FF-SDK/blob/release/0.1.1/Document/en/docfx/docs/development.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="FF-SDK-Unity">
            FF-SDK-Unity
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

        </div>

        <article data-uid="">
<h1 id="4-ff-sdk-unity-application-development">4. FF-SDK-Unity application development</h1>

<h2 id="41-ff-sdk-unity-basics-of-development">4.1. FF-SDK-Unity basics of development</h2>
<p>The basic flow of FF-SDK-Unity application development is as follows.
(It is assumed that the FF-SDK-Unity setup is already complete.)</p>
<ol>
<li><p>Place HapticManager prefab into a scene<br>
Place Assets/Commissure/HapticsSystem/Core/Prefabs/HapticManager into the scene.<br>
<img src="images/development_00.png" alt="Put HapticManager prefab"></p>
</li>
<li><p>Place arbitrary HapticOutput-related prefab into the scene<br>
Place a Prefab such as Assets/Commissure/HapticsSystem/Devices/FeelFuseV1/Prefabs/FeelFuseV1Output into the scene.<br>
<img src="images/development_01.png" alt="Put HapticOutput prefab"><br>
To see the types of HapticOutput and their descriptions, please refer to <a href="#432hapticoutput" title="4.3.2.HapticOutput">4.3.2. HapticOutput</a>.</p>
</li>
<li><p>Link HapticManager and HapticOutput<br>
Set HapticOutput placed into the scene to Outputs field at the HapticManager Inspector.<br>
In the image below, the two HapticOutput are connected.<br>
This enables haptic feedback to be delivered to two output destinations.<br>
<img src="images/development_02.png" alt="Setup HapticManager"></p>
</li>
<li><p>Place arbitrary HapticInput-related prefab into the scene<br>
Place a Prefab such as Assets/Commissure/HapticsSystem/Core/Prefabs/PointHapticInput into the scene.<br>
In the diagram below, four HapticInputs are placed.<br>
If you use MetaQuest, use MetaXRHapticInputs.prefab in <a href="#44-ui-development-helper">4.4. UI development helper</a>.
<img src="images/development_03.png" alt="Put HapticInput prefab"></p>
</li>
<li><p>Set up HapticInput<br>
PointHapticInput has a setting for which part of the human body corresponds to, so configure it appropriately.
<img src="images/development_04.png" alt="Setup HapticInput"></p>
</li>
<li><p>Attach the HapticSource-related component to the object where you want to generate haptic feedback<br>
Attach 3 components, HapticSource, FingerVibrationSource, and HapticForceSource.<br>
HapticSource uses the Collider, so attach the Collider-related component as well.<br>
In the following example, attach BasicFingerVibrationSource, which generates basic vibration haptics, and GravityHapticForceSource, which generates gravity haptics.<br>
<img src="images/development_05.png" alt="Setup HapticSource"></p>
</li>
<li><p>Modify various paramaters to customize the haptic feedback<br>
Configure settings such as AudioClip to generate vibrations.</p>
</li>
</ol>
<h2 id="42-customize-haptics">4.2. Customize haptics</h2>
<p>To customize haptics feedback, you can modify the settings of the HapticsSource-related components provided by SDK in the Inspector, change properties via code, or create custom components.<br>
To implement a custom component, create a class that implements the interface below, and attach it to a GameObject which is same as the HapticSource.</p>
<table>
<thead>
<tr>
<th>Interface</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>IFingerVibrationSource</td>
<td>Interface of vibration haptic source</td>
</tr>
<tr>
<td>IHapticForceSource</td>
<td>Interface of shear haptic source</td>
</tr>
</tbody>
</table>
<h2 id="43-components-provided-by-sdk">4.3. Components provided by SDK</h2>
<p>Components provided by SDK are placed under Commissure/HapticsSystem/ as below.</p>
<h3 id="431hapticinput">4.3.1.　HapticInput</h3>
<table>
<thead>
<tr>
<th>Component</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Core/Prefabs/PointHapticInput.prefab</td>
<td>Point input</td>
</tr>
</tbody>
</table>
<h3 id="432hapticoutput">4.3.2.　HapticOutput</h3>
<table>
<thead>
<tr>
<th>Component</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Devices/Simulator/Prefabs/SimulatorOutput.prefab</td>
<td>Simulator that allows you to visually check haptic output on the screen</td>
</tr>
<tr>
<td>Devices/FeelFuseV1/Prefabs/FeelFuseV1Output.prefab</td>
<td>Output for FeelFuse devices</td>
</tr>
<tr>
<td>Devices.Windows/FeelFuseV0/Prefabs/FeelFuseV0Output.prefab</td>
<td>Output for FeelFuse devices with USB wired connection</td>
</tr>
</tbody>
</table>
<h3 id="433fingervibrationsource">4.3.3.　FingerVibrationSource</h3>
<table>
<thead>
<tr>
<th>Component</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Core/Scripts/HapticSources/FingerVibration/BasicFingerVibrationSource.cs</td>
<td>Output single vibration audio</td>
</tr>
<tr>
<td>Core/Scripts/HapticSources/HapticForce/GravityHapticForceSource.cs</td>
<td>Enable to switch between multiple audio clips for output</td>
</tr>
</tbody>
</table>
<h3 id="434hapticforcesource">4.3.4.　HapticForceSource</h3>
<table>
<thead>
<tr>
<th>Component</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Core/Scripts/HapticSources/FingerVibration/BasicFingerVibrationSource.cs</td>
<td>Output gravity</td>
</tr>
<tr>
<td>Core/Scripts/HapticSources/HapticForce/LinearResistanceHapticForceSource.cs</td>
<td>Output linear resistive force</td>
</tr>
<tr>
<td>Core/Scripts/HapticSources/HapticForce/TwoPointHapticForceSource.cs</td>
<td>Output force based on the distance between two points</td>
</tr>
</tbody>
</table>
<h2 id="44-ui-development-helper">4.4. UI development helper</h2>
<p>Helper components useful for the application development are provided under Assets/Commissure/HapticsSystem.</p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>UI/Scripts/GenericGrabbable.cs</td>
<td>The action of grabbing an object to which HapticSource is attached<br>Attach it to the same GameObject as HapticSource and use it<br>If the device-side SDK, such as Meta Quest, provides a grabbing action, setting the triggerOnly field to true allows detection of haptic feedback only</td>
</tr>
<tr>
<td>UI.MetaXR/Prefabs/MetaXRHapticInputs.prefab</td>
<td>An object that attaches HapticInput to the fingertips of the Hand model provided by Meta XR SDK and automatically follows their movement<br>Place into a scene and use it</td>
</tr>
<tr>
<td>UI.TofAr/Prefabs/TofARCamera.prefab</td>
<td>An object that attaches HapticInput to the fingertips of the Hand model provided by ToF AR SDK and automatically follows their movement<br>Place into a scene and use it</td>
</tr>
</tbody>
</table>
<h3 id="441-metaxrhapticinputs-setting">4.4.1. MetaXRHapticInputs setting</h3>
<ol>
<li>Place UI.MetaXR/Prefabs/MetaXRHapticInputs.prefab into a scene.</li>
<li>Set the reference for the Hand field of the HandJoint component attached to the four of  HapticInput under MetaXRHapticInputs.<br>
Set the reference destination as follows.</li>
</ol>
<table>
<thead>
<tr>
<th>Component</th>
<th>Reference destination</th>
</tr>
</thead>
<tbody>
<tr>
<td>HapticInputLeftThumb</td>
<td>LeftHandSynthetic</td>
</tr>
<tr>
<td>HapticInputLeftIndex</td>
<td>LeftHandSynthetic</td>
</tr>
<tr>
<td>HapticInputRightThumb</td>
<td>RightHandSynthetic</td>
</tr>
<tr>
<td>HapticInputRightIndex</td>
<td>RightHandSynthetic</td>
</tr>
</tbody>
</table>
<p><img src="images/development_10.png" alt="HandJoint.Hand Reference"></p>
<ol start="3">
<li>Set the value of the Joint Id field of the HandJoint component attached to the four of  HapticInput under MetaXRHapticInputs.<br>
Set the value as follows.</li>
</ol>
<table>
<thead>
<tr>
<th>Component</th>
<th>Joint Id Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>HapticInputLeftThumb</td>
<td>Hand Thumb Tip</td>
</tr>
<tr>
<td>HapticInputLeftIndex</td>
<td>Hand Index Tip</td>
</tr>
<tr>
<td>HapticInputRightThumb</td>
<td>Hand Thumb Tip</td>
</tr>
<tr>
<td>HapticInputRightIndex</td>
<td>Hand Index Tip</td>
</tr>
</tbody>
</table>
<h2 id="45-development-and-debugging-support">4.5. Development and debugging support</h2>
<p>You can use ToF AR SDK to streamline development and debugging with hand tracking without wearing a head-mounted display.</p>
<ol>
<li>Download ToF AR Server from App Store on ToF AR compatible devices (iPhones or iPad Pros that support Face ID).<br>
<a href="https://apps.apple.com/jp/app/tof-ar-server/id1613866652">https://apps.apple.com/jp/app/tof-ar-server/id1613866652</a></li>
<li>Place TofArCamera.prefab into a scene.</li>
<li>Connect your smartphone and the PC running Unity to the same network.</li>
<li>Launch ToF AR Server on your smartphone and check IP address displayed on the application.<br>
<img src="images/development_06.jpeg" alt="ToF AR Server"></li>
<li>Set that IP address in the Debug Server IP Address field of TofArCamera/TofArManager in the scene's Inspector.<br>
<img src="images/development_07.png" alt="TofArManager"></li>
<li>Restart the Unity Editor.</li>
</ol>
<p>After complementing the above settings, playing the scene will enable hand trackiing using the Face ID camera on the smartphone. This allows to intract with objects by touching or grabbing them while developing and debugging.<br>
<img src="images/development_08.png" alt="Hand tracking by ToF AR"></p>
<h2 id="46-feelfuse-with-usb-wired-connection-setting">4.6. FeelFuse with USB wired connection setting</h2>
<p>FeelFuse with USB wired connection performs communication by using the COM port of a Windows PC.<br>
Specify the COM port used by communication at SerialPort_Left or SerialPort_Right Inspector under FeelFuseV0Output object.<br>
The settings are automatically saved locally on the PC, so reconfiguration is not required on the next startup.</p>

</article>


        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
